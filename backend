from flask import Flask, request, jsonify
from flask_cors import CORS
import random

app = Flask(__name__)
CORS(app)  # Allow frontend to connect

# Simple rule-based responses
responses = {
    "budget": "ðŸ“Š Budgeting tip: Always follow the 50/30/20 rule â€“ 50% needs, 30% wants, 20% savings.",
    "save": "ðŸ’° Saving tip: Automate savings by setting up recurring transfers right after payday.",
    "invest": "ðŸ“ˆ Investing advice: Start with index funds or SIPs to minimize risks and build wealth.",
    "tax": "ðŸ§¾ Tax tip: Keep track of all deductible expenses to reduce your taxable income.",
    "default": "ðŸ¤” I'm not sure about that. Can you rephrase your question?"
}

@app.route("/chat", methods=["POST"])
def chat():
    data = request.get_json()
    user_msg = data.get("message", "").lower()

    # Pick response
    reply = responses["default"]
    for keyword, ans in responses.items():
        if keyword in user_msg:
            reply = ans
            break

    return jsonify({"reply": reply})

if __name__ == "__main__":
    app.run(debug=True)
